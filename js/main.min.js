function adjustLayerbyZoom(e){if(e>9){if(!GINAdmin2){map.addLayer(guineaAdminLayer2);for(var o=0;o<GINLabels.length;o++)GINLabels[o].addTo(map);GINAdmin2=!0}}else{map.removeLayer(guineaAdminLayer2);for(var o=0;o<GINLabels.length;o++)map.removeLayer(GINLabels[o]);GINAdmin2=!1}}function triggerUiUpdate(){type=$("#hf_type").val(),region=$("#region_scope").val(),prefecture=$("#prefecture_scope").val();var e=buildQuery(type,region,prefecture,sub_prefecture);getData(e),prefecture_select=$("#region_scope").val()}function buildQuery(e,o,r,t){var n=!1;return query="https://femtope.cartodb.com/api/v2/sql?format=GeoJSON&q=SELECT * FROM guinea_hf",e.length>0||o.length>0||r.length>0||t.length>0?(query=query.concat(" WHERE"),e.length>0&&(query=query.concat(" type = '".concat(e.concat("'"))),n=!0),o.length>0&&(query=query.concat(n?" AND region = '".concat(o.concat("'")):" region = '".concat(o.concat("'"))),n=!0),r.length>0&&(query=query.concat(n?" AND prefecture = '".concat(r.concat("'")):" prefecture = '".concat(r.concat("'"))),n=!0),t.length>0&&(query=query.concat(n?" AND sub_prefecture = '".concat(t.concat("'")):" sub_prefecture = '".concat(t.concat("'"))),n=!0)):query="https://femtope.cartodb.com/api/v2/sql?format=GeoJSON&q=SELECT * FROM guinea_hf",query}function addDataToMap(e){null!=dataLayer&&map.removeLayer(dataLayer),null!=markerGroup&&map.removeLayer(markerGroup);var o=L.icon({iconUrl:"image/Hospital_Logo_01.png",iconSize:[20,20],iconAnchor:[25,25]});$("#projectCount").text(e.features.length),markerGroup=L.markerClusterGroup({showCoverageOnHover:!1,zoomToBoundsOnClick:!0,removeOutsideVisibleBounds:!0}),dataLayer=L.geoJson(e,{pointToLayer:function(e,r){var t=L.marker(r,{icon:o});return t},onEachFeature:function(e,o){e.properties&&e.properties.cartodb_id&&o.on("click",function(){displayInfo(e)})}}),markerGroup.addLayer(dataLayer),map.addLayer(markerGroup)}function addAdminLayersToMap(e){var o={admin0:{clickable:!0,color:"#B81609",fillColor:"#ffffff",weight:2,opacity:1.5,fillOpacity:.1},admin2:{clickable:!0,color:"#412406",fillColor:"#80FFFFFF",weight:1.5,opacity:.5,fillOpacity:.1},region:{clickable:!0,color:"#e2095c",fillColor:"#80FFFFFF",weight:2,opacity:.7,fillOpacity:.1},prefecture:{clickable:!0,color:"#e2095c",fillColor:"#80FFFFFF",weight:2.5,opacity:.7,fillOpacity:.1},sub_prefecture:{clickable:!0,color:"#ff0000",fillColor:"#80FFFFFF",weight:2.5,opacity:.7,fillOpacity:.1}};regionSelect=$("#region_scope").val(),prefectureSelect=$("#prefecture_scope").val(),guineaAdminLayer0=L.geoJson(e.guineaAdmin0,{style:o.admin0}).addTo(map),guineaAdminLayer2=L.geoJson(e.guineaAdmin2,{style:o.region,onEachFeature:function(e,o){var r=L.divIcon({className:"labelLga-icon",html:e.properties.NAME_2});GINLabels.push(L.marker(o.getBounds().getCenter(),{icon:r}))}}),null!=region_layer&&map.removeLayer(region_layer),region_layer=L.geoJson(e.guineaAdmin1,{filter:function(e){return e.properties.NAME_1===regionSelect},style:o.region}).addTo(map),map.fitBounds(region_layer.getBounds()),null!=prefecture_layer&&map.removeLayer(prefecture_layer),prefecture_layer=L.geoJson(e.guineaAdmin2,{filter:function(e){return e.properties.NAME_2===prefectureSelect},style:o.region}).addTo(map),map.fitBounds(prefecture_layer.getBounds())}function displayInfo(e){var o=buildPopupContent(e);$("#infoContent").html(o)}function normalizeName(e){return e=e.replace("_"," ").replace("of_"," of "),e=e.replace(/\w\S*/g,function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()})}function buildPopupContent(e){for(var o="",r=["country","region","prefecture","sub_prefecture","place","type","organization","center"],t=0;t<r.length;t++)o=o.concat("<p><strong>"+normalizeName(r[t])+": </strong>"+e.properties[r[t]]+"</p>");return o}function showLoader(){$(".fa-spinner").addClass("fa-spin"),$(".fa-spinner").show()}function hideLoader(){$(".fa-spinner").removeClass("fa-spin"),$(".fa-spinner").hide()}function getData(e){showLoader(),$.post(e,function(e){hideLoader(),addDataToMap(e),console.log("Data-Geo::  ",e)}).fail(function(){console.log("error!")})}function getAdminLayers(){showLoader();var e={};$.get("resources/GIN_Admin0.geojson",function(o){e.guineaAdmin0=JSON.parse(o),addAdminLayersToMap(e)}).fail(function(){logError(null)}),$.get("resources/GIN_Admin1.geojson",function(o){e.guineaAdmin1=JSON.parse(o),addAdminLayersToMap(e)}).fail(function(){logError(null)}),$.get("resources/GIN_Admin2.geojson",function(o){e.guineaAdmin2=JSON.parse(o),addAdminLayersToMap(e)}).fail(function(){logError(null)})}function logError(){console.log("error!")}function showPrefecture(){prefecture_show=document.getElementById("prefecture_id"),prefecture_show1=document.getElementById("prefecture_id1"),""!=prefecture_select?(prefecture_show.style.visibility="visible",prefecture_show1.style.visibility="visible"):(prefecture_show.style.visibility="hidden",prefecture_show1.style.visibility="hidden")}function populatedropdown(e,o,r){for(var t=new Date,e=document.getElementById(e),o=document.getElementById(o),r=document.getElementById(r),n=0;31>n;n++)e.options[n]=new Option(n+1,n+1);e.options[t.getDate()-1].selected=!0;for(var a=0;12>a;a++)o.options[a]=new Option(monthtext[a],monthtext[a]);o.options[t.getMonth()].selected=!0;for(var i=t.getFullYear(),c=0;20>c;c++)r.options[c]=new Option(i,i),i+=1;r.options[0]=new Option(t.getFullYear(),t.getFullYear(),!0,!0)}function changeDay(e){d=e.selectedIndex+1,console.log("Day: ",d)}function changeMonth(e){m=e.selectedIndex+1,console.log("Month: ",m)}function changeYear(e){y=e.value,date=m+"/"+d+"/"+y,console.log("Year: ",y),console.log("DATE: ",date)}var type="",distance,twokm,threekm,fourkm,region="",prefecture="",prefecture_select="",sub_prefecture="",geoData=null,dataLayer=null,markerGroup=null,guineaAdminLayer0,guineaAdminLayer1,guineaAdminLayer2,region_layer=null,prefecture_layer=null,sub_prefecture_layer=null,bufferLayer=null,GINLabels=[],within,within_fc,buffered=null,GINAdmin2=!1,googleSat=L.tileLayer("http://{s}.google.com/vt/lyrs=s&x={x}&y={y}&z={z}",{maxZoom:20,subdomains:["mt0","mt1","mt2","mt3"]}),googleStreets=L.tileLayer("http://{s}.google.com/vt/lyrs=m&x={x}&y={y}&z={z}",{maxZoom:20,subdomains:["mt0","mt1","mt2","mt3"]}),osm=L.tileLayer("http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:18}),map=L.map("map",{center:[9.6,-12.6],zoom:7,animation:!0,zoomControl:!1,layers:[osm]});map.options.minZoom=7;var baseMaps={"Google Satelite":googleSat,OSM:osm,"Google Street":googleStreets};map.on("zoomend",function(){adjustLayerbyZoom(map.getZoom())}),new L.Control.Zoom({position:"topright"}).addTo(map),L.control.layers(baseMaps).addTo(map),L.control.scale({position:"bottomright",maxWidth:100,metric:!0,updateWhenIdle:!0}).addTo(map),$(document).ready(function(){var e=$("#prefecture_scope option");$("#region_scope").change(function(){$("#prefecture_scope option").remove();var o=$("#region_scope option:selected").prop("class"),r=e.filter("."+o);$.each(r,function(e,o){$(o).appendTo("#prefecture_scope")})})}),getAdminLayers(),hideLoader();var monthtext=["January","February","March","April","May","June","July","August","September","October","November","December"];onload=function(){populatedropdown("d","m","y")};var d,m,y,date;
//# sourceMappingURL=main.min.js.map